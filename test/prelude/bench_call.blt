# Method call benchmark. Sends a trivial message, a fallthrough message, and a
# fallthrough receiver 1 million times using the method call syntax from the
# standard library. Hopefully this isn't too much slower than the built-in
# message send syntax that it's sugar for (see core.bench_send).

{import|.} std;

bind receiver message .;
bind _ fallthrough    .;
bind fallthrough _    .;

receiver <- (new receiver);
fallthrough <- (new fallthrough);

{!benchmark|n{:=|1000000}}{normal|
    ($ receiver): message[]
};

{!benchmark|n{:=|1000000}}{fallthrough_message|
    ($ fallthrough): mesage[]
};

{!benchmark|n{:=|1000000}}{fallthrough_receiver|
    ($ receiver): fallthrough[]
};

.
